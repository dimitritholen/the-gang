{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://claude-code.anthropic.com/schemas/task-manifest.json",
  "title": "Task Manifest Schema",
  "description": "Task-level tracking manifest for individual features in Claude Code",
  "type": "object",
  "required": ["featureId", "featureSlug", "tasks"],
  "properties": {
    "featureId": {
      "type": "string",
      "description": "Two-digit feature ID matching root manifest",
      "pattern": "^[0-9]{2}$"
    },
    "featureSlug": {
      "type": "string",
      "description": "Feature slug matching root manifest",
      "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$"
    },
    "created": {
      "type": "string",
      "format": "date-time",
      "description": "Task manifest creation timestamp"
    },
    "updated": {
      "type": "string",
      "format": "date-time",
      "description": "Last update timestamp"
    },
    "tasks": {
      "type": "array",
      "description": "List of all tasks for this feature",
      "items": {
        "$ref": "#/definitions/Task"
      }
    },
    "nextTask": {
      "type": "string",
      "description": "ID of the next task to work on (null if all complete)",
      "pattern": "^T[0-9]{2}$"
    },
    "completedTasks": {
      "type": "array",
      "description": "List of completed task IDs in order",
      "items": {
        "type": "string",
        "pattern": "^T[0-9]{2}$"
      }
    }
  },
  "definitions": {
    "Task": {
      "type": "object",
      "required": ["id", "slug", "title", "status", "file"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Task ID (format: TNN where NN is zero-padded number)",
          "pattern": "^T[0-9]{2}$"
        },
        "slug": {
          "type": "string",
          "description": "URL-safe task identifier (lowercase, hyphen-separated)",
          "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$"
        },
        "title": {
          "type": "string",
          "description": "Human-readable task title",
          "minLength": 1
        },
        "status": {
          "type": "string",
          "description": "Current task status",
          "enum": ["NOT_STARTED", "IN_PROGRESS", "BLOCKED", "COMPLETED"]
        },
        "dependencies": {
          "type": "array",
          "description": "List of task IDs that must complete before this task",
          "items": {
            "type": "string",
            "pattern": "^T[0-9]{2}$"
          }
        },
        "file": {
          "type": "string",
          "description": "Filename of the task XML definition",
          "pattern": "^T[0-9]{2}-[a-z0-9]+(-[a-z0-9]+)*\\.xml$"
        },
        "outputFile": {
          "type": "string",
          "description": "Filename for agent execution output (markdown)",
          "pattern": "^T[0-9]{2}-output\\.md$"
        },
        "created": {
          "type": "string",
          "format": "date-time",
          "description": "Task creation timestamp"
        },
        "started": {
          "type": "string",
          "format": "date-time",
          "description": "Task start timestamp"
        },
        "completed": {
          "type": "string",
          "format": "date-time",
          "description": "Task completion timestamp"
        },
        "assignedAgent": {
          "type": "string",
          "description": "Name of the agent assigned to execute this task"
        },
        "estimatedHours": {
          "type": "number",
          "description": "Estimated effort in hours",
          "minimum": 0
        },
        "actualHours": {
          "type": "number",
          "description": "Actual time spent in hours",
          "minimum": 0
        },
        "blockedBy": {
          "type": "array",
          "description": "List of issues blocking this task",
          "items": {
            "type": "string"
          }
        }
      }
    }
  }
}
